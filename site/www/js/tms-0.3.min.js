/* jQuery based image slider
/* TMSlider 0.3.2 */function clone(e){if(!e||typeof e!=typeof {})return e;if(e instanceof Array)return[].concat(e);var t=new e.constructor,n;for(n in e)e.hasOwnProperty(n)&&(t[n]=clone(e[n]));return t}(function(e,t){var n=window._TMS=e.fn._TMS=function(t){return t=t||{},t=e.extend(clone(n),n.presets[t.preset],t),t.init.call(t.me=t.holder=this,t),t.me.data({opt:t})};e.extend(n,{etal:"<div></div>",items:".items>li",pic:"pic",mask:"mask",paginationCl:"pagination",currCl:"current",pauseCl:"paused",bannerCl:"banner",numStatusCl:"numStatus",pagNums:!0,overflow:"hidden",show:0,changeEv:"click",blocksX:1,blocksY:1,preset:"simpleFade",duration:1e3,easing:"linear",way:"lines",anim:"fade",pagination:!1,banners:!1,waitBannerAnimation:!0,slideshow:!1,progressBar:!1,pauseOnHover:!1,nextBu:!1,prevBu:!1,playBu:!1,preFu:function(){var t=this,n=e(new Image);t.pic=e(t.etal).addClass(t.pic).css({overflow:t.overflow}).appendTo(t.me),t.mask=e(t.etal).addClass(t.mask).appendTo(t.pic),t.me.css("position")=="static"&&t.me.css({position:"relative"}),t.me.css("z-index")=="auto"&&t.me.css({zIndex:1}),t.me.css({overflow:t.overflow}),t.items&&t.parseImgFu(),n.appendTo(t.me).load(function(){t.pic.css({width:t.width=n.width(),height:t.height=n.height(),background:"url("+t.itms[t.show]+") 0 0 no-repeat"}),n.remove(),t.current=t.buff=t.show}).attr({src:t.itms[t.n=t.show]})},sliceFu:function(t,n){var r=this,t=r.blocksX,n=r.blocksY,i=parseInt(r.width/t),s=parseInt(r.height/n),o=e(r.etal),u=r.pic.width()-i*t,a=r.pic.height()-s*n,f,l,c=r.matrix=[];r.mask.css({position:"absolute",width:"100%",height:"100%",left:0,top:0,zIndex:1}).empty().appendTo(r.pic);for(l=0;l<n;l++)for(f=0;f<t;f++)c[l]=c[l]?c[l]:[],c[l][f]=e(r.etal).clone().appendTo(r.mask).css({left:f*i,top:l*s,position:"absolute",width:f==t-1?i+u:i,height:l==n-1?s+a:s,backgroundPosition:"-"+f*i+"px -"+l*s+"px",display:"none"});r.maskC&&(r.maskC.remove(),delete r.maskC),r.maskC=r.mask.children()},changeFu:function(t){var r=this;if(r.bl)return!1;if(t==r.n)return!1;r.n=t,r.next=r.itms[t],r.direction=t-r.buff,r.direction==r.itms.length-1&&(r.direction=-1),r.direction==-1*r.itms.length+1&&(r.direction=2),r.current=r.buff=t,r.numStatus&&r.numStatusChFu(),r.pagination&&r.pags.removeClass(r.currCl).eq(t).addClass(r.currCl),r.banners!==!1&&r.banner&&r.bannerHide(r.banner,r),r.progressBar&&(clearInterval(r.slShTimer),r.progressBar.stop()),r.slideshow&&!r.paused&&r.progressBar&&r.progressBar.stop().width(0);var i=function(){r.preset_!=r.preset&&(r.du=r.duration,r.ea=r.easing,e.extend(r,n.presets[r.preset]),r.duration=r.du,r.easing=r.ea,r.preset_=r.preset),r.sliceFu(),r.maskC.stop().css({backgroundImage:"url("+r.next+")"}),r.beforeAnimation(),r.showFu()};r.waitBannerAnimation?e.when(r.banner).then(i):i()},nextFu:function(){var e=this,t=e.n;e.changeFu(++t<e.itms.length?t:0)},prevFu:function(){var e=this,t=e.n;e.changeFu(--t>=0?t:e.itms.length-1)},showFu:function(){var e=this,t,n;t=e.ways[e.way].call(e),e.reverseWay&&t.reverse(),e.dirMirror&&(t=e.dirMirrorFu(t)),e.int&&clearInterval(e.int),e.int=setInterval(function(){t.length?e.anims[e.anim].apply(e,[t.shift(),!t.length]):clearInterval(e.int)},e.interval),e.bl=!0},dirMirrorFu:function(e){var t=this;return t.direction<0&&void 0,e},afterShow:function(){var e=this;e.pic.css({backgroundImage:"url("+e.next+")"}),e.maskC.hide(),e.slideshow&&!e.paused&&e.startSlShFu(0),e.banners!==!1&&(e.banner=e.banners[e.n]),e.banner&&(e.banner.appendTo(e.me),e.bannerShow(e.banner,e)),e.afterAnimation(),e.bl=!1},bannerShow:function(){},bannerHide:function(){},parseImgFu:function(){var t=this;t.itms=[],e(t.items+" img",t.me).each(function(n){t.itms[n]=e(this).attr("src")}),e(t.items,t.me).hide()},controlsFu:function(){var t=this;t.nextBu&&e(t.nextBu).bind(t.changeEv,function(){return t.nextFu(),!1}),t.prevBu&&e(t.prevBu).bind(t.changeEv,function(){return t.prevFu(),!1})},paginationFu:function(){var t=this;if(t.pagination===!1)return!1;t.pagination===!0?t.pags=e("<ul></ul>"):typeof t.pagination=="string"&&(t.pags=e(t.pagination)),t.pags.parent().length==0&&t.pags.appendTo(t.me),t.pags.children().length==0?e(t.itms).each(function(n){var r=e("<li></li>").data({num:n});t.pags.append(r.append('<a href="#"></a>'))}):t.pags.find("li").each(function(t){e(this).data({num:t})}),t.pagNums&&t.pags.find("a").each(function(t){e(this).text(t+1)}),t.pags.delegate("li>a",t.changeEv,function(){return t.changeFu(e(this).parent().data("num")),!1}),t.pags.addClass(t.paginationCl),t.pags=e("li",t.pags),t.pags.eq(t.n).addClass(t.currCl)},startSlShFu:function(t){var n=this;n.paused=!1,n.prog=t||0,clearInterval(n.slShTimer),n.slShTimer=setInterval(function(){n.prog<100?n.prog++:(n.prog=0,clearInterval(n.slShTimer),n.nextFu()),n.progressBar&&n.pbchFu()},n.slideshow/100),n.playBu&&e(n.playBu).removeClass(n.pauseCl)},pauseSlShFu:function(){var t=this;t.paused=!0,clearInterval(t.slShTimer),t.playBu&&e(t.playBu).addClass(t.pauseCl)},slideshowFu:function(){var t=this;if(t.slideshow===!1)return!1;t.playBu&&e(t.playBu).bind(t.changeEv,function(){return t.paused?t.startSlShFu(t.prog):t.pauseSlShFu(),!1}),t.startSlShFu()},pbchFu:function(){var e=this;e.prog==0?e.progressBar.stop().width(0):e.progressBar.stop().animate({width:e.prog+"%"},{easing:"linear",duration:e.slideshow/100})},progressBarFu:function(){var t=this;if(t.progressBar===!1)return!1;t.progressBar=e(t.progressBar),t.progressBar.parent().length==0&&t.progressBar.appendTo(t.me)},pauseOnHoverFu:function(){var e=this;e.pauseOnHover&&e.me.bind("mouseenter",function(){e.pauseSlShFu()}).bind("mouseleave",function(){e.startSlShFu(e.prog)})},bannersFu:function(){var t=this;if(t.banners===!1)return!1;t.banners!==!0&&typeof t.banners=="string"&&(t.bannerShow=t.bannersPresets[t.banners].bannerShow,t.bannerHide=t.bannersPresets[t.banners].bannerHide),t.banners=[],e(t.items,t.me).each(function(n){var r;t.banners[n]=(r=e("."+t.bannerCl,this)).length?r.css({zIndex:999}):!1}),t.bannerShow(t.banner=t.banners[t.show].appendTo(t.me),t)},bannerDuration:1e3,bannerEasing:"swing",bannersPresets:{fromLeft:{bannerShow:function(e,t){e.css("top")=="auto"&&e.css("top",0),e.stop().css({left:-e.width()}).animate({left:0},{duration:t.bannerDuration,easing:t.bannerEasing})},bannerHide:function(e,t){e.stop().animate({left:-e.width()},{duration:t.bannerDuration,easing:t.bannerEasing})}},fromRight:{bannerShow:function(e,t){e.css("top")=="auto"&&e.css("top",0),e.css("left")!="auto"&&e.css("left","auto"),e.stop().css({right:-e.width()}).animate({right:0},{duration:t.bannerDuration,easing:t.bannerEasing})},bannerHide:function(e,t){e.stop().animate({right:-e.width()},{duration:t.bannerDuration,easing:t.bannerEasing})}},fromBottom:{bannerShow:function(e,t){e.css("left")=="auto"&&e.css("left",0),e.css("top")!="auto"&&e.css("top","auto"),e.stop().css({bottom:-e.height()}).animate({bottom:0},{duration:t.bannerDuration,easing:t.bannerEasing})},bannerHide:function(e,t){e.stop().animate({bottom:-e.height()})}},fromTop:{bannerShow:function(e,t){e.css("left")=="auto"&&e.css("left",0),e.stop().css({top:-e.height()}).animate({top:0},{duration:t.bannerDuration,easing:t.bannerEasing})},bannerHide:function(e,t){e.stop().animate({top:-e.height()},{duration:t.bannerDuration,easing:t.bannerEasing})}},fade:{bannerShow:function(e,t){e.css("left")=="auto"&&e.css("left",0),e.css("top")=="auto"&&e.css("top",0),e.hide().fadeIn(t.bannerDuration)},bannerHide:function(e,t){e.fadeOut(t.bannerDuration)}}},numStatusChFu:function(){var t=this;t.numSt.html('<span class="curr"></span>/<span class="total"></span>'),e(".curr",t.numSt).text(t.n+1),e(".total",t.numSt).text(t.itms.length)},numStatusFu:function(){var t=this;if(t.numStatus===!1)return!1;t.numSt||(t.numStatus===!0?t.numSt=e(t.etal).addClass(t.numStatusCl):t.numSt=e(t.numStatus).addClass(t.numStatusCl)),t.numSt.parent().length||t.numSt.appendTo(t.me).addClass(t.numStatusCl),t.numStatusChFu()},init:function(e){e.preFu(),e.controlsFu(),e.paginationFu(),e.slideshowFu(),e.progressBarFu(),e.pauseOnHoverFu(),e.bannersFu(),e.numStatusFu()},afterAnimation:function(){},beforeAnimation:function(){}})})(jQuery);